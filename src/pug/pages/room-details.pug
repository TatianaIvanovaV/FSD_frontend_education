extends ../layout/index.pug
include ../includes/modules/dropdown-select-counters.pug
include ../includes/modules/total-calc-card.pug
block content
  include ../includes/modules/header.pug
  - var roomDetails = [{className:"details__gallery--main",name:"room-exemple1",alt:""},{className:"details__gallery--up",name:"room-exemple2",alt:""},{className:"details__gallery--low",name:"room-exemple3",alt:""}]

  - var intelligenceItems = [{icon: "tag_faces", descrTitle: "Комфорт", descrParagraph: "Шумопоглощающие стены"},{icon: "location_city", descrTitle: "Удобство", descrParagraph: "Окно в каждой из спален"}, {icon: "whatshot", descrTitle: "Уют", descrParagraph: "Номер оснащён камином"}]

  - var reviewsItems= [{count:11, customerName:"Мурад Сарафанов",wrightAgo:"5 дней назад", paragraph:"Великолепный матрас на кровати в основной спальне! А пуфик вообще потрясающий. И стены, действительно, шумоподавляющие. Выкрикивал комплименты повару — никто не жаловался из соседей."},{count:2, customerName:"Патрисия Стёклышкова",wrightAgo:"Неделю назад", paragraph:"Обслуживание на высоте! Всё аккуратно, чисто. Завтраки в номер советую заказать, каждый день новое блюдо и десерт как комплимент"}]

  main.main
    .details
      .details__intro
        mixin fotoRoomDetails()
          each photo in roomDetails
            .details__gallery(class=photo.className)
              img(src="./assets/img/background/" + photo.name + '.png', alt=photo.alt)
        +fotoRoomDetails()
      .details__info
        .container
          .details__columns
            .details__columns-left
              .details__boost
                .details__intelligence.intelligence
                  h2.intelligence__h2 Сведения о номере
                  ul.intelligence__list
                    mixin intelligenceList()
                      each point in intelligenceItems
                        li.intelligence__item
                          .intelligence__emogy
                            i.material-icons.intelligence__icon= point.icon
                          .intelligence__descr
                            h3.intelligence__descr-h3= point.descrTitle
                            p.intelligence__decr-p= point.descrParagraph     
                    +intelligenceList()
                .details__chart.chart
                  h2.chart__h2 Впечатления от номера
                  mixin pieChart(perfect, good, satisfactorily, bad)
                    - let position = {good, bad, perfect, satisfactorily}
                    - let totalCount = perfect + good + satisfactorily + bad
                    - let legend = {perfect:"Великолепно",good:"Хорошо",satisfactorily:"Удовлетворительно",bad:"Разочарован"}
                    .chart__pie-chart
                      .chart__group
                        svg(width="124" height="124" viewbox="0 0 34 34" fill="none" stroke-width="1")
                          defs
                            linearGradient(id="perfect" x1="0%" y1="0%" x2="0%" y2="100%")
                              stop(offset="0%" stop-color="#FFE39C")
                              stop(offset="100%" stop-color="#FFBA9C")
                            linearGradient(id="good" x1="0%" y1="0%" x2="100%" y2="0%")
                              stop(offset="0%" stop-color="#66D2EA")
                              stop(offset="100%" stop-color="#6FCF97")
                            linearGradient(id="satisfactorily" x1="0%" y1="0%" x2="0%" y2="100%")
                              stop(offset="0%" stop-color="#BC9CFF")
                              stop(offset="100%" stop-color="#8BA4F9")
                            linearGradient(id="bad" x1="0%" y1="0%" x2="0%" y2="100%")
                              stop(offset="0%" stop-color="#919191")
                              stop(offset="100%" stop-color="#3D4975")
                          - let previosOffset = 0
                          each value, voteColor in position
                            if value !== 0
                              - let gap = 1
                              - let dash = value * 100 / totalCount - gap
                              circle(r="15.9" stroke=`url(#${voteColor})` stroke-dasharray=`${dash} 100` stroke-dashoffset= previosOffset cx="50%" cy="50%")
                              - previosOffset = previosOffset - dash - gap   
                        p.chart__info
                          span.chart__count= totalCount 
                          +declOfNum(totalCount, ["голос", "голоса", "голосов"])
                      ul.chart__legend 
                        each item, voteColor in legend
                          li.chart__legend-item
                            svg(width=10 height=10)
                              circle(r=5 cx='50%' cy='50%' fill=`url(#${voteColor})`)
                            = item
                  +pieChart(130,65,65,0)
              .details__reviews.reviews
                .reviews__titie
                  h2.reviews__h2 Отзывы посетителей номера
                  span.reviews__quantity
                    !=(reviewsItems.length) + "&nbsp;"
                    +declOfNum(reviewsItems.length, ["отзыв", "отзыва", "отзывов"])
                ul.reviews__list
                  mixin reviewsList() 
                    for item, index in reviewsItems 
                      li.reviews__item
                        .reviews__avatar 
                          img(src="./assets/img/customers/customer"+ (index+1) + '.png',alt=item.customerName)
                          .reviews__like
                            i.material-icons.reviews__icon="favorite_border"
                            span.reviews__like-num= item.count
                        .reviews__main
                          h3.reviews__name= item.customerName
                          span.reviews__ago= item.wrightAgo
                          p.reviews__p= item.paragraph 
                  +reviewsList()
              .details__end
                .details__rules
                  h2.details__rules-h2 Правила
                  ul.details__rules-list
                    -let rulesList=["Нельзя с питомцами","Без вечеринок и мероприятий","Время прибытия — после 13:00, <br>а выезд до 12:00"]
                      each item in rulesList
                        li.details__rules-item !{item}
                .details__cancel
                  h2.details__cancel-h2 Отмена
                  .details__cancel-p Бесплатная отмена в течение 48 ч. После <br>этого при отмене не позднее чем за 5 дн. до прибытия вы получите полный возврат за вычетом сбора за услуги.
            .details__columns-right
              +totalCalc(9990,4,888,true,-2179, 300)           
  include ../includes/modules/footer.pug 